<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Applications with recorded data &#8212; MapMint data collection - MapMint4ME</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css?v=1e09a8bb" />
    
    <script src="_static/documentation_options.js?v=f2a433a1"></script>
    <script src="_static/doctools.js?v=f8950b3e"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="The MapMint4ME data collector" href="mm4me.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="mm4me.html" title="The MapMint4ME data collector"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Workshop</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Applications with recorded data</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="applications-with-recorded-data">
<span id="dmap"></span><h1>Applications with recorded data<a class="headerlink" href="#applications-with-recorded-data" title="Link to this heading">¶</a></h1>
<section id="show-a-map-for-your-table">
<h2>Show a map for your table<a class="headerlink" href="#show-a-map-for-your-table" title="Link to this heading">¶</a></h2>
<p>You may want to add a map to your online table edition form. In such a
case, there are some rules to respect to get the map functionning
properly.</p>
<p>From the Distiller module, click on the <em>Open in manager</em> button to
create a new project using the table used to store the data recorded
in the field. In case it does not appear directly in the Distiller,
please use the refresh button to get up-to-date information about
every geographic table within the database.</p>
<a class="reference internal image-reference" href="_images/mmtmc0.png"><img alt="MapMint4ME Home" class="align-center" src="_images/mmtmc0.png" style="width: 100%;" />
</a>
<p>From the Manager, save your project under a name respecting the
following syntax: <code class="docutils literal notranslate"><span class="pre">&lt;schema&gt;___&lt;table&gt;</span></code>, where <code class="docutils literal notranslate"><span class="pre">&lt;schema&gt;</span></code> should be
replaced by the schema name (in your case <code class="docutils literal notranslate"><span class="pre">sample</span></code> ) and
<code class="docutils literal notranslate"><span class="pre">table</span></code> should be replace by your table name (in your case,
<code class="docutils literal notranslate"><span class="pre">wsxpoints</span></code>). Then, define the parameters to make your layer
appearing the way want with the activated capabilities you need. After
the settings for your project is over, publish it as any other project
by allowing, at least, giving the user groups permision to edit the table.</p>
<a class="reference internal image-reference" href="_images/mmtmc1.png"><img alt="MapMint4ME Home" class="align-center" src="_images/mmtmc1.png" style="width: 100%;" />
</a>
<p>Now, if you access again the MapMint table client module, you should
get an associated map which zoom on the element you have
selected.</p>
<a class="reference internal image-reference" href="_images/mmtmc2.png"><img alt="MapMint4ME Home" class="align-center" src="_images/mmtmc2.png" style="width: 100%;" />
</a>
</section>
<section id="create-report-for-your-data">
<h2>Create report for your data<a class="headerlink" href="#create-report-for-your-data" title="Link to this heading">¶</a></h2>
<p>Depending on the type of your data you may want to produce a
report. MapMint relies on LibreOffice server which is responsible for
generating the reports in various formats. MapMint uses its own
templating system fully compatible with Open Document Text (odt)
format. For producing reports for a table or an elemnt, MapMint will
use an odt template file, which is a very basic odt file, and will
replace every field found in the template with the expected value(s).</p>
<p>Let us suppose that we want to get a table showing the last 10 items
recorded and a diagram showing the repartition of record amongst the
catogories.</p>
<p>First of all, you have to create an odt file using your local
LibreOffice installation. Then add a table to the document with
2 rows and 2 columns. Then set <em>Title</em> and <em>Description</em> in the first
row of the table. Right-click on the table, in the contextual menu,
click on the <em>Table properties</em>. Here, set the table name as
<code class="docutils literal notranslate"><span class="pre">[_listing1_]</span></code> and press <em>OK</em>.</p>
<p>Now, we will add a digram, define it as circular and give a name by
using the <em>Object…</em> itemfrom the contextual menu appearing when you
right-click on the diagram in your document. Here, choose the name
<code class="docutils literal notranslate"><span class="pre">[_diag1_]</span></code> and press <em>OK</em>.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="_images/mmr-2.png"><img alt="MapMint4ME Home" src="_images/mmr-2.png" style="width: 100%;" /></a></p></td>
<td><p><a class="reference internal" href="_images/mmr-1.png"><img alt="MapMint4ME Home" src="_images/mmr-1.png" style="width: 100%;" /></a></p></td>
</tr>
</tbody>
</table>
<p>Finally, you will need to link your report with your table  to
configure the way you want the table and diagram to be completed.</p>
<p>To do so, go to the MapMint table administration interface,
select your table configuration from the list then click on the
<em>Report</em> tab to access the report settings.</p>
<a class="reference internal image-reference" href="_images/mmr0.png"><img alt="MapMint4ME Home" class="align-center" src="_images/mmr0.png" style="width: 80%;" />
</a>
<p>Here, you can set the following parameters:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>Title</strong></p></td>
<td><p>the tab title</p></td>
</tr>
<tr class="row-even"><td><p><strong>Select element</strong></p></td>
<td><p>check if the report production depends on a selected element</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Clause</strong></p></td>
<td><p>the SQL where condition (true in case no condition)</p></td>
</tr>
<tr class="row-even"><td><p><strong>Groups</strong></p></td>
<td><p>the user groups allowed to produce such a report</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Document model</strong></p></td>
<td><p>the odt template</p></td>
</tr>
</tbody>
</table>
<p>Once you have uploaded your document model, by selecting your local
odt file then pressing the <em>Import</em> button, you shall see every field
you have defined in your template. So, in your case the <code class="docutils literal notranslate"><span class="pre">diag1</span></code> and
<code class="docutils literal notranslate"><span class="pre">listing1</span></code>.</p>
<p>For every field defined in your template you can define a type and a
value to be included in the report.</p>
<p>In your case, the <code class="docutils literal notranslate"><span class="pre">diag1</span></code> type should be <strong>Diagram</strong> and
the value the following SQL query:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nv">select</span>
<span class="w">  </span><span class="p">$</span><span class="nv">q</span><span class="p">$</span><span class="w"> </span><span class="o">&#39;</span><span class="p">{$</span><span class="nv">q</span><span class="p">$</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">&#39;&#39;&#39;&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">a::text</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">&#39;&#39;&#39;&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">$</span><span class="nv">q</span><span class="p">$,</span><span class="w"> </span><span class="o">&#39;</span><span class="p">{</span><span class="s">&quot;Categories&quot;</span><span class="p">}</span><span class="o">&#39;</span><span class="p">,</span><span class="w">  </span><span class="p">$</span><span class="nv">q</span><span class="p">$</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">&#39;&#39;&#39;&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">b::text</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">&#39;&#39;&#39;&#39;</span>
<span class="w">  </span><span class="o">||</span><span class="w"> </span><span class="p">$</span><span class="nv">q</span><span class="p">$}</span><span class="o">&#39;</span><span class="p">$</span><span class="nv">q</span><span class="p">$</span>
<span class="k">from</span>
<span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="nv">select</span>
<span class="w">   </span><span class="nf">array</span><span class="p">(</span><span class="w"> </span><span class="nv">select</span><span class="w"> </span><span class="nv">name</span><span class="o">||</span><span class="p">$</span><span class="nv">q</span><span class="p">$</span><span class="w"> </span><span class="p">$</span><span class="nv">q</span><span class="p">$</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="nv">sample</span><span class="o">.</span><span class="nv">categories</span>
<span class="w">      </span><span class="nv">where</span><span class="w"> </span><span class="nv">id</span><span class="w"> </span><span class="nf">in</span><span class="w"> </span><span class="p">(</span><span class="nv">select</span><span class="w"> </span><span class="nv">distinct</span><span class="w"> </span><span class="nv">category</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="nv">sample</span><span class="o">.</span><span class="nv">wsxpoints</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">a</span><span class="p">,</span>
<span class="w">  </span><span class="nf">array</span><span class="p">(</span><span class="nv">select</span>
<span class="w">          </span><span class="nv">array</span><span class="p">[</span><span class="nf">count</span><span class="p">(</span><span class="o">*</span><span class="p">)]</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="nv">sample</span><span class="o">.</span><span class="nv">wsxpoints</span>
<span class="w">   </span><span class="nv">group</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">category</span><span class="w"> </span><span class="ow">or</span><span class="nv">der</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">category</span><span class="p">)</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">b</span>
<span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">v</span><span class="p">)</span>
</pre></div>
</div>
<p>For the <code class="docutils literal notranslate"><span class="pre">listing1</span></code> field, set the type to <strong>SQL Table</strong> and the
value to the following SQL query:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>(select ARRAY[
 ARRAY[&#39;Name &#39;,&#39;Description &#39;]] ||
 array((select array[name::text||$q$ $q$]||array[description::text||$q$ $q$] from sample.wsxpoints order by id desc limit 5))
 )
</pre></div>
</div>
<p>You should press the <em>Save</em> button for your report settings to be
saved. Then, as presented in the screen shot below, you should see a
new tab, named as you have entitled your report, appearing from the
MapMint table client module. If you access to it, you can then press <em>Run</em>
to ask the server to generate the report. At the end of its
processing, it will return a link to the pdf, odt, doc, and html
version of the produced report.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="_images/mmr1.png"><img alt="MapMint4ME Home" src="_images/mmr1.png" style="width: 100%;" /></a></p></td>
<td><p><a class="reference internal" href="_images/mmr2.png"><img alt="MapMint4ME Home" src="_images/mmr2.png" style="width: 100%;" /></a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">¶</a></h2>
<p>In this final section, you have leanrt how to add a map to your
MapMint table client module and to produce reports out of the
recorded data.</p>
<p>You should now be able to set-up the MapMint table module from any
MapMint instance. Then, create tables, when required, and configure
edition forms for theses tables. You know that it is easy and reliable
to use MapMint4ME for data collection in conjunction with a MapMint
server. The final touch was the map view from table client module and
the reporting about the data collected.</p>
<p>Hoping you had great time reading this material.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="tables.html">The Table modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="mm4me.html">The MapMint4ME data collector</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Applications with recorded data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#show-a-map-for-your-table">Show a map for your table</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-report-for-your-data">Create report for your data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="mm4me.html" title="The MapMint4ME data collector"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Workshop</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Applications with recorded data</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    </div>
  </body>
</html>